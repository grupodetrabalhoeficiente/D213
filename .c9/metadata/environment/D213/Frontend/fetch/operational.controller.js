{"filter":false,"title":"operational.controller.js","tooltip":"/D213/Frontend/fetch/operational.controller.js","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":134,"column":2},"end":{"row":209,"column":0},"action":"remove","lines":["","const urlParams = new URLSearchParams(window.location.search);","const idUser = \"2378\"; //Temporario depois alterar pra LocalHost","const confirm = document.getElementById(\"confirmPassword\");","confirm.onclick = savePassword;","","function profileName() {","    async function fetchAsync() {","        console.log('Entrou na função profileName')","        fetch(`https://bdc5dcf6bca04b39ab10a706cdb79f29.vfs.cloud9.us-east-1.amazonaws.com/operationals/${urlParams.get('id_operational')}`)","            .then(res => res.json())","            .then((out) => {","                $('#rankPosition div').empty();","                $.each(out, function(index, value) {","                    document.getElementById('name').innerHTML = value.name;","                    document.getElementById('profileSpeciality').value = value.speciality;","                    document.getElementById('profileTypeOfOperational').value = value.operational_type;","                    document.getElementById('profileEmail').value = value.email;","                    document.getElementById('profileBirthDate').value = value.birth_date;","                    document.getElementById('profilePassword').value = value.password;","                    document.getElementById('position').innerHTML = value.points;","                })","            }).catch(err => console.error(err));","    }","    //chama a função fetchAsync()","    fetchAsync().then(data => console.log(\"ok\")).catch(reason => console.log(reason.message));","}","","","","/*   Save new password   */","function savePassword() {","    let data = {};","    data.newPassword = document.getElementById(\"profileNewPassword\").value;","    data.confirmPassword = document.getElementById(\"profileConfirmPassword\").value;","    console.log(data); //debugging para ver os dados que foram enviados","    //chamada fetch para envio dos dados para o servior via POST","    fetch(`https://bdc5dcf6bca04b39ab10a706cdb79f29.vfs.cloud9.us-east-1.amazonaws.com/operationals/${urlParams.get('id_operational')}`, {","        headers: { 'Content-Type': 'application/json' },","        method: 'PUT',","        body: JSON.stringify(data)","    }).then(function(response) {","        if (!response.ok) {","            console.log(response.status); //=> number 100–599","            console.log(response.statusText); //=> String","            console.log(response.headers); //=> Headers","            console.log(response.url); //=> String","            /*if (response.status === 409) {","                alert(\"Duplicated Email\");","            }","            else {","                throw Error(response.statusText);","            }*/","        }","        else {","            document.getElementById(\"profileNewPassword\").value = \"\"; //limpeza dos dados do form","            document.getElementById(\"profileConfirmPassword\").value = \"\";","            profileName();","            alert(\"submitted with success\");","        }","    }).then(function(result) {","        console.log(result);","    }).catch(function(err) {","        alert(\"Submission error\");","        console.error(err);","    });","}","/*                  */","","","","$(document).ready(function() {","    profileName();","})","",""],"id":2,"ignore":true}],[{"start":{"row":16,"column":80},"end":{"row":17,"column":47},"action":"insert","lines":["","                    document.getElementById(\"\")"],"id":3,"ignore":true}],[{"start":{"row":17,"column":44},"end":{"row":17,"column":46},"action":"remove","lines":["\"\""],"id":4,"ignore":true},{"start":{"row":17,"column":44},"end":{"row":17,"column":46},"action":"insert","lines":["''"]}],[{"start":{"row":17,"column":45},"end":{"row":17,"column":63},"action":"insert","lines":["profilePhoneNumber"],"id":5,"ignore":true},{"start":{"row":17,"column":65},"end":{"row":17,"column":77},"action":"insert","lines":[".value=value"]}],[{"start":{"row":17,"column":77},"end":{"row":17,"column":78},"action":"insert","lines":["."],"id":6,"ignore":true}],[{"start":{"row":17,"column":71},"end":{"row":17,"column":72},"action":"insert","lines":[" "],"id":7,"ignore":true},{"start":{"row":17,"column":73},"end":{"row":17,"column":74},"action":"insert","lines":[" "]},{"start":{"row":17,"column":80},"end":{"row":17,"column":93},"action":"insert","lines":["phone_number;"]}]]},"ace":{"folds":[],"scrolltop":96,"scrollleft":22.399999618530273,"selection":{"start":{"row":32,"column":18},"end":{"row":32,"column":18},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":4,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1608087573729,"hash":"eaf0522da1d5eb39e7937d827dcd2edd9cae2482"}