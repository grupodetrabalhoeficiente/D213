{"changed":true,"filter":false,"title":"help-request.controller.js","tooltip":"/D213/Frontend/fetch/help-request.controller.js","value":"const id_occurrence = \"1\";\ndocument.getElementById(\"submit\").onclick = function(e) {\n    //validação do formulário ao submeter\n    saveHelpRequest;\n};\n\nfunction saveHelpRequest() {\n    let data = {};\n    data.name = document.getElementById(\"nome_testemunha\").value;\n    data.email = document.getElementById(\"contacto_testemunha\").value;\n    data.place = document.getElementById(\"localidade_testemunha\").value;\n    data.profession = document.getElementById(\"morada_testemunha\").value;\n    data.testimony = document.getElementById(\"nota_testemunha\").value;\n    data.justification = document.getElementById(\"justification\").value;\n    console.log(data); //debugging para ver os dados que foram enviados\n    //chamada fetch para envio dos dados para o servior via POST\n    fetch('https://bdc5dcf6bca04b39ab10a706cdb79f29.vfs.cloud9.us-east-1.amazonaws.com/occurrences/' + id_occurrence + '/witnesses', {\n        headers: { 'Content-Type': 'application/json' },\n        method: 'POST',\n        body: JSON.stringify(data)\n    }).then(function(response) {\n        if (!response.ok) {\n            console.log(response.status); //=> number 100–599\n            console.log(response.statusText); //=> String\n            console.log(response.headers); //=> Headers\n            console.log(response.url); //=> String\n            if (response.status === 409) {\n                alert(\"Duplicated Email\");\n            }\n            else {\n                throw Error(response.statusText);\n            }\n        }\n        else {\n            document.getElementById(\"form-testemunha\").reset(); //limpeza dos dados do form\n            alert(\"submitted with success\");\n        }\n    }).then(function(result) {\n        console.log(result);\n    }).catch(function(err) {\n        alert(\"Submission error\");\n        console.error(err);\n    });\n}","undoManager":{"mark":-2,"position":6,"stack":[[{"start":{"row":0,"column":0},"end":{"row":43,"column":1},"action":"insert","lines":["const id_occurrence = \"1\";","document.getElementById(\"submit\").onclick = function(e) {","    //validação do formulário ao submeter","    saveWitness();","};","","function saveWitness() {","    let data = {};","    data.name = document.getElementById(\"nome_testemunha\").value;","    data.email = document.getElementById(\"contacto_testemunha\").value;","    data.place = document.getElementById(\"localidade_testemunha\").value;","    data.profession = document.getElementById(\"morada_testemunha\").value;","    data.testimony = document.getElementById(\"nota_testemunha\").value;","    data.justification = document.getElementById(\"justification\").value;","    console.log(data); //debugging para ver os dados que foram enviados","    //chamada fetch para envio dos dados para o servior via POST","    fetch('https://bdc5dcf6bca04b39ab10a706cdb79f29.vfs.cloud9.us-east-1.amazonaws.com/occurrences/' + id_occurrence + '/witnesses', {","        headers: { 'Content-Type': 'application/json' },","        method: 'POST',","        body: JSON.stringify(data)","    }).then(function(response) {","        if (!response.ok) {","            console.log(response.status); //=> number 100–599","            console.log(response.statusText); //=> String","            console.log(response.headers); //=> Headers","            console.log(response.url); //=> String","            if (response.status === 409) {","                alert(\"Duplicated Email\");","            }","            else {","                throw Error(response.statusText);","            }","        }","        else {","            document.getElementById(\"form-testemunha\").reset(); //limpeza dos dados do form","            alert(\"submitted with success\");","        }","    }).then(function(result) {","        console.log(result);","    }).catch(function(err) {","        alert(\"Submission error\");","        console.error(err);","    });","}"],"id":1}],[{"start":{"row":6,"column":13},"end":{"row":6,"column":20},"action":"remove","lines":["Witness"],"id":2},{"start":{"row":6,"column":13},"end":{"row":6,"column":14},"action":"insert","lines":["H"]},{"start":{"row":6,"column":14},"end":{"row":6,"column":15},"action":"insert","lines":["e"]},{"start":{"row":6,"column":15},"end":{"row":6,"column":16},"action":"insert","lines":["l"]},{"start":{"row":6,"column":16},"end":{"row":6,"column":17},"action":"insert","lines":["p"]},{"start":{"row":6,"column":17},"end":{"row":6,"column":18},"action":"insert","lines":["R"]},{"start":{"row":6,"column":18},"end":{"row":6,"column":19},"action":"insert","lines":["e"]}],[{"start":{"row":6,"column":19},"end":{"row":6,"column":20},"action":"insert","lines":["q"],"id":3},{"start":{"row":6,"column":20},"end":{"row":6,"column":21},"action":"insert","lines":["u"]},{"start":{"row":6,"column":21},"end":{"row":6,"column":22},"action":"insert","lines":["e"]},{"start":{"row":6,"column":22},"end":{"row":6,"column":23},"action":"insert","lines":["s"]},{"start":{"row":6,"column":23},"end":{"row":6,"column":24},"action":"insert","lines":["t"]}],[{"start":{"row":3,"column":8},"end":{"row":3,"column":15},"action":"remove","lines":["Witness"],"id":4},{"start":{"row":3,"column":8},"end":{"row":3,"column":9},"action":"insert","lines":["H"]},{"start":{"row":3,"column":9},"end":{"row":3,"column":10},"action":"insert","lines":["e"]},{"start":{"row":3,"column":10},"end":{"row":3,"column":11},"action":"insert","lines":["l"]},{"start":{"row":3,"column":11},"end":{"row":3,"column":12},"action":"insert","lines":["p"]}],[{"start":{"row":3,"column":12},"end":{"row":3,"column":13},"action":"insert","lines":["R"],"id":5}],[{"start":{"row":3,"column":4},"end":{"row":3,"column":13},"action":"remove","lines":["saveHelpR"],"id":6},{"start":{"row":3,"column":4},"end":{"row":3,"column":19},"action":"insert","lines":["saveHelpRequest"]}],[{"start":{"row":3,"column":19},"end":{"row":3,"column":21},"action":"remove","lines":["()"],"id":7}],[{"start":{"row":8,"column":9},"end":{"row":8,"column":13},"action":"remove","lines":["name"],"id":8},{"start":{"row":8,"column":9},"end":{"row":8,"column":10},"action":"insert","lines":["r"]},{"start":{"row":8,"column":10},"end":{"row":8,"column":11},"action":"insert","lines":["e"]},{"start":{"row":8,"column":11},"end":{"row":8,"column":12},"action":"insert","lines":["a"]},{"start":{"row":8,"column":12},"end":{"row":8,"column":13},"action":"insert","lines":["s"]},{"start":{"row":8,"column":13},"end":{"row":8,"column":14},"action":"insert","lines":["o"]},{"start":{"row":8,"column":14},"end":{"row":8,"column":15},"action":"insert","lines":["n"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":20,"column":32},"end":{"row":20,"column":32},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":152,"mode":"ace/mode/javascript"}},"timestamp":1610927628344}