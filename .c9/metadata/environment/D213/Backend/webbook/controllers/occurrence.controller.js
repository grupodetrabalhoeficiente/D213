{"filter":false,"title":"occurrence.controller.js","tooltip":"/D213/Backend/webbook/controllers/occurrence.controller.js","undoManager":{"mark":6,"position":6,"stack":[[{"start":{"row":374,"column":73},"end":{"row":374,"column":74},"action":"remove","lines":["a"],"id":2},{"start":{"row":374,"column":72},"end":{"row":374,"column":73},"action":"remove","lines":["p"]}],[{"start":{"row":374,"column":71},"end":{"row":374,"column":72},"action":"remove","lines":[" "],"id":3}],[{"start":{"row":82,"column":0},"end":{"row":118,"column":1},"action":"remove","lines":["function updateOccurrenceDeparture(req, res) {","    //receber os dados do formuário que são enviados por post","    const departure = req.sanitize('departure').escape();","    const id_occurrence = req.sanitize('id_occurrence').escape();","    let query = \"\";","    query = connect.con.query('update ?? SET departure=? where id_occurrence=? and status=?', ['occurrence', departure, id_occurrence, \"Em progresso\"], function(err, rows,","        fields) {","        console.log(query.sql);","        if (!err) {","            console.log(\"Number of records updated: \" + rows.affectedRows);","            res.status(200).send({ \"msg\": \"update with success\" });","        }","        else {","            res.status(400).send({ \"msg\": err.code });","            console.log('Error while performing Query.', err);","        }","    });","}","","function updateOccurrenceArrival(req, res) {","    //receber os dados do formuário que são enviados por post","    const arrival = req.sanitize('arrival').escape();","    const id_occurrence = req.sanitize('id_occurrence').escape();","    let query = \"\";","    query = connect.con.query('update ?? SET arrival=? where id_occurrence=? and status=?', ['occurrence', arrival, id_occurrence, \"Em progresso\"], function(err, rows,","        fields) {","        console.log(query.sql);","        if (!err) {","            console.log(\"Number of records updated: \" + rows.affectedRows);","            res.status(200).send({ \"msg\": \"update with success\" });","        }","        else {","            res.status(400).send({ \"msg\": err.code });","            console.log('Error while performing Query.', err);","        }","    });","}"],"id":4},{"start":{"row":81,"column":0},"end":{"row":82,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":81,"column":0},"end":{"row":82,"column":0},"action":"remove","lines":["",""],"id":5}],[{"start":{"row":622,"column":0},"end":{"row":623,"column":53},"action":"remove","lines":["    updateOccurrenceDeparture: updateOccurrenceDeparture,","    updateOccurrenceArrival: updateOccurrenceArrival,"],"id":6},{"start":{"row":621,"column":39},"end":{"row":622,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":646,"column":0},"end":{"row":647,"column":0},"action":"remove","lines":["",""],"id":7}],[{"start":{"row":639,"column":0},"end":{"row":640,"column":0},"action":"remove","lines":["",""],"id":8}]]},"ace":{"folds":[],"scrolltop":2651,"scrollleft":0,"selection":{"start":{"row":639,"column":0},"end":{"row":639,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1608552060604,"hash":"911638454d5f254ca5ce307248249ca81fc4dc24"}